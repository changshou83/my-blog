- 安全层如何加解密
	- 对称加密
		- 指加密和解密都使用的是相同的密钥
		- 在 HTTPS 发送数据之前，浏览器和服务器之间需要协商加密方式和密钥
		- 通信过程
			- 浏览器发送它所支持的加密套件列表和一个随机数 client-random，这里的加密套件是指加密的方法
			- 服务器会从加密套件列表中选取一个加密套件，然后还会生成一个随机数 service-random，并将 service-random 和加密套件列表返回给浏览器
			- 浏览器和服务器分别返回确认消息
			- 之后浏览器和服务器将client-random和service-random混合成秘钥master secret，然后使用选择的加密套件进行通信
		- 缺陷
			- 传输 client-random 和 service-random 的过程是明文的
			- 意味着黑客也可以拿到协商的加密套件和双方的随机数，由于利用随机数合成密钥的算法是公开的，所以黑客拿到随机数之后，也可以合成密钥
	- 非对称加密
		- 非对称加密算法有 A、B 两把密钥，如果你用 A 密钥来加密，那么只能使用 B 密钥来解密
		- 公钥是每个人都能获取到的，而私钥只有服务器才能知道，不对任何人公开
		- 通信过程
			- 浏览器发送加密套件列表给服务器
			- 服务器会选择一个加密套件，最后将加密套件和公钥一道发送给浏览器
			- 浏览器和服务器返回确认消息
			- 之后发送数据时，浏览器使用该公钥来加密数据，服务器接收到数据之后使用四要进行解密
		- 缺陷
			- 非对称加密的效率太低
			- 无法保证服务器发送给浏览器的数据安全
				- 攻击者可以使用浏览器的公钥对服务器数据进行解密
	- 混合加密
		- 在传输数据阶段依然使用对称加密，但是对称加密的密钥我们采用非对称加密来传输
		- 通信流程
			- 浏览器向服务器发送对称加密套件列表、非对称加密套件列表和随机数 client-random
			- 服务器保存随机数 client-random，选择对称加密和非对称加密的套件，然后生成随机数 service-random，向浏览器发送选择的加密套件、service-random 和公钥
			- 浏览器保存公钥，并生成随机数 pre-master，然后利用公钥对 pre-master 加密，并向服务器发送加密后的数据
			- 最后服务器拿出自己的私钥，解密出 pre-master 数据，并返回确认消息
		- 缺陷
			- 完美地实现了数据的加密传输
			- 不能确定访问的IP是否为目标IP
	- 数字证书
		- 服务器向浏览器提供证明“我就是我”
		- 由CA颁发数字证书，向HTTPS证明访问的网站是可信的
		- 数字证书的作用
			- 通过数字证书向浏览器证明服务器的身份
			- 数字证书里面包含了服务器公钥
		- 通信过程(与混合加密相比)
			- 服务端返回service-random时，一并返回数字证书
			- 在生成随机数pre-master之前验证数字证书
		- 申请
			- 准备一套公钥与私钥，将公钥及一些认证信息提交给CA机构，然后CA机构进行验证
			- 验证通过之后即可签发数字证书
			- 得到数字签名
				- 首先 CA 使用 Hash 函数来计算极客时间提交的明文信息，并得出信息摘要
				- 然后 CA 再使用它的私钥对信息摘要进行加密，加密后的密文就是 CA 颁给极客时间的数字签名
		- 浏览器验证
			- 浏览器接到数字证书之后会对数字证书进行验证
			- 过程
				- 首先浏览器读取证书中相关的明文信息，采用 CA 签名时相同的 Hash 函数来计算并得到信息摘要 A
				- 然后再利用对应 CA 的公钥解密签名数据，得到信息摘要 B
				- 对比信息摘要 A 和信息摘要 B，如果一致，则可以确认证书是合法的
- 加餐内容
  - 数字证书链与自证证书
  - HTTPS 并非是绝对安全的，采用 HTTPS 只是加固了城墙的厚度
