- 所谓字节码，是指编译过程中的中间代码
- 字节码有两个作用
	- 解释器可以直接解释执行字节码
	- 优化编译器可以将字节码编译为二进制代码，然后再执行二进制机器代码
- 采用JIT的原因
	- Chrome 做了两件事来提升 JavaScript 代码的执行速度
		- 将运行时的二进制机器代码缓存在内存中
		- 当浏览器退出时，缓存编译之后二进制代码到磁盘上
	- 问题
		- 时间问题：编译时间过久，影响代码启动速度
		- 空间问题：缓存编译后的二进制代码占用更多的内存
	- 解决：添加一种中间代码，即便于解释执行，又不过度占用内存
		- 解决启动问题：生成字节码的时间很短
		- 解决空间问题：字节码占用内存不多，缓存字节码会大大降低内存的使用
		- 代码架构清晰：采用字节码，可以简化程序的复杂度，使得 V8 移植到不同的 CPU 架构平台更加容易
- 如何生成字节码
	- 先对 JavaScript 代码进行解析 (Parser)，并生成为 AST 和作用域信息
	- AST 和作用域信息被输入到一个称为 Ignition 的解释器中，并将其转化为字节码
	- 字节码再由 Ignition 解释器来解释执行
- 解释器是如何解释执行字节码
	- 通常有两种类型的解释器
		- 基于栈 (Stack-based)：使用栈来保存函数参数、中间运算结果、变量等
		- 基于寄存器 (Register-based)：使用寄存器来保存参数、中间计算结果
		- 区别为字节码的指令形式不同
	- 现在的 V8 虚拟机则采用了基于寄存器的设计
	- 基于寄存器的架构设计
		- 内存中的字节码、寄存器、栈、堆