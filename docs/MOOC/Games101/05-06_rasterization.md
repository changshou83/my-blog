# 光栅化

## 光栅化

- mvp之后要干什么，要对归一化立方体进行光栅化
- 光栅(Raster)就是德语里的屏幕的意思
	- 什么是屏幕？一组像素数组，一种典型的光栅化成像设备
		- 像素(Pixel, Picture element的缩写)，当前作为一个只有一个固定颜色的抽象最小单位来理解，颜色是通过三原色混合来成色
	- 光栅化就是把图像绘制到屏幕上
- 屏幕空间
	- 0-width，0-height
	- 像素中心点：i+0.5,j+0.5
- 光栅化的方法：采样
	- 遍历三角形的包围盒(根据三角形的三个顶点排除绝不可能涉及到的点)，如果中心点在三角形内部就判断其在三角形内，否则在三角形外
	- 怎么判断在三角形内外，利用向量叉乘，如果一个点在三条线段的同一边，那么就认为其在三角形内部
- 信号丢失：锯齿
	- 因为像素本身有大小，又由于采样频率不够导致信号丢失造成信息丢失

## 抗锯齿

- 为什么会产生锯齿(走样)：采样频率不够
	- 在当前采样频率下，对两个不同的信号采样结果相同就叫走样
	- 信号在采样时发生了混叠就叫走样
	- 现象
		- 空间：摩尔纹
		- 时间：车轮倒转
- 如何抗锯齿(AntiAliasing)
	- 简单说法：先模糊再采样
	- 就是先对图像进行低通滤波干掉高频信号降低信号范围，然后再采样就会较少混叠发生的区间
		- MSAA：不增加分辨率/像素点，而是增加采样点提升采样效率
	- 其他方法
		- FXAA：不是增加采样点，而是对图像进行处理，先得出锯齿图片，然后去掉锯齿
		- TAA：将MSAA分布在时间上(原来是在空间上，算占多少面积)
- 超采样(Super Sampling)
	- 对低分辨率的图像进行升级分辨率
	- DLSS：通过深度学习猜出被模糊的信息

## 深度测试

- 判断物体在视野中的深度
- painter algorithm
	- 由远及近，层层覆盖
	- 缺点是不能绘制互相遮挡的物体，例如三个物体组成的换
- z-buffer
	- 思想
		- 为每个样本存储当前最小 `z` 值
		- 为每个样本准备缓冲区
			- frame buffer：存储当前像素颜色
			- depth buffer：存储当前最小深度
	- 这里的z永远是正的且越大越远，越小越近
	- 复杂度：O(n)，因为只是遍历一遍每个像素顺便记录深度最小值而已
