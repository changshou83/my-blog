## 包

### 包

- 每个`Go`程序都是由包构成的。程序从  `main`  包开始运行。
- 按照约定，包名与导入路径的最后一个元素一致。
  - 例如:`main`包以`package main`开始

### 导入/出

- 导入:`import ("package1" "package2")`
- 导出
  - 在`Go`中，如果一个名字以大写字母开头，那么它就是已导出的
  - 在导入一个包时，你只能引用其中已导出的名字。任何“未导出”的名字在该包外均无法访问
  - 例如：你可以访问`math.Pi`，但是不可以访问`math.pi`

## 变量

### 声明

- `var`语句用于声明一个变量列表，类型在最后。它可以出现在包或函数级别。
- 短变量声明
  - 在**函数**中，简洁赋值语句  `:=`  可在**类型明确**的地方代替  `var`  声明
  - 函数外的每个语句都必须**以关键字开始**，因此  `:=`  结构不能在函数外使用
- 同导入语句一样，变量声明也可以“分组”成一个语法块

### 初始化

- 变量声明可以包含初始值，每个变量对应一个
- 如果初始化值已存在，则可以省略类型；变量会从初始值中获得类型

```go
package main

import "fmt"

var i, j int = 1, 2

func main() {
  var c, java = true, "no!"
  k := 3
  fmt.Println(i, j, k, c, java)
}
```

### 基本类型

- `bool`
- `string`
- `int`,`int8`,`int16`,`int32`,`int64`
- `uint`,`uint8`,`uint16`,`uint32`,`uint64`,`uintptr`
- `byte`(`int8` 的别名)
- `rune`(`int32` 的别名，表示一个`Unicode`码点)
- `float32`,`float64`(浮点数)
- `complex64`,`complex128`(虚数类型)
- Note
  - `int`, `uint`  和  `uintptr`  在 32 位系统上通常为 32 位宽，在 64 位系统上则为 64 位宽
  - 当你需要一个整数值时应使用  `int`  类型,除非你有特殊的理由使用固定大小或无符号的整数类型

### 默认值

- 没有明确初始值的变量声明会被赋予它们的  **零值**
- 数值类型为`0`;布尔类型为`false`;字符串为`""`（空字符串）

### 类型转换

- 表达式`T(v)`,将`v`转换为`T`类型
- 与 C 不同的是，`Go`没有隐式转换，所有在不同类型的项之间进行赋值都需要显式转换

### 类型推导

- 在声明一个变量而不指定其类型时，变量的类型由右值推导得出
- 当右边包含**未指明类型的数值常量**时，新变量的类型就可能是  `int`, `float64`  或  `complex128`  了，这取决于常量的精度

### 常量

- 使用`const`关键字声明常量
- 常量不能使用`:=`快速声明
- 数值常量：数值常量是高精度的  **值**

## 函数

### 函数

- 函数可以没有参数或接受多个参数
- Note:类型在变量名  **之后** - (add1)
- Note:当连续两个或多个函数的已命名形参类型相同时，除最后一个类型以外，其它都可以省略 - (add2)

```go
package main
import "fmt"

func add1(x int, y int) int {
  return x + y
}
func add2(x, y int) int {
  return x + y
}
func main() {
  fmt.Println(add1(42, 13))
  fmt.Println(add2(42, 13))
}
```

### 函数返回

- 多值返回：函数可以返回任意数量的返回值
- 命名返回值
  - `Go`的返回值可被命名，它们会被视作**定义在函数顶部的变量**
    - 所以相当于简写形式
  - 没有参数的`return`语句返回已命名的返回值,也就是`直接`返回
    - 直接返回语句应当仅用在**短函数**中。在长的函数中它们会影响代码的可读性。

```go
package main
import "fmt"

func swap(x, y string) (string, string) {
  return y, x
}
func split(sum int) (x, y int) {
  x = sum * 4 / 9
  y = sum - x
  return// 相当于 return x, y
  // 但是你也可以 return x, x
}
func main() {
  a, b := swap("hello", "world")
  fmt.Println(a, b)
  fmt.Println(split(17))
}
```

## 小结

- go 程序由包构成，一般从 main 包开始运行
- 可以批量导入
- 只有大写开头的才是已导出的
- 特殊的快速声明，其类型被自动推导
- 零值概念，其实就是类型默认值
- 在不同的类型间没有隐式转换，必须显式转换
- 类型写在变量后，且同类型可以只写最后一个
- 特殊的多返回值和返回值命名
